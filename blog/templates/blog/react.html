{% extends 'blog/base.html' %}
{% block content %}
<h3>React.js</h3>
<hr>
<div id="root"></div>

<script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

<script type="text/babel">
    'use strict';

class Clock extends React.Component{
    constructor(props){
        super(props);
        this.state = {date:new Date()};
    }
    
    componentDidMount() {
        this.timerID = setInterval(
            () => this.tick(), 1000
        );
    }
    componentWillUnmount(){
        clearInterval(this.timerID);
    }
    tick(){
        this.setState({date : new Date()});
    }

    render(){
        return(<div>
            <h2>지금은 {this.state.date.toLocaleTimeString()}입니다.</h2>
        </div>);
    }
}

class Counter extends React.Component{
    constructor(props){
        super(props);
        this.state = { counter : 0 };

        this.plusOne = this.plusOne.bind(this);
        this.setZero = this.setZero.bind(this);
    }
    plusOne(){
        this.setState(state => ({counter: state.counter + 1}));
    }
    setZero(){
        this.setState({counter: 0 });
    }
    render(){
        return(<div>
            <h3>{this.state.counter}</h3>
            <button onClick={this.plusOne} class="btn btn-default">+1</button>
            <button onClick={this.setZero} class="btn btn-default">0</button>
        </div>);
    }
}

function App(){
    return(
        <div>
            <Clock />
            <Counter />
            <Counter />
            <Counter />    
        </div>
    )
}

ReactDOM.render(
    <App />,
    document.getElementById('root')
)

</script>

{% endblock %}